(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{22:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},28:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),o=n(12),s=n.n(o),a=(n(20),n(21),n(22),n(4)),i=n.n(a),l=n(5),b=n(6),u=n(8),j=n(10),d=n(9),h=(n(24),n(25),n(14)),p=n(2),O=new function e(){Object(b.a)(this,e),Object(p.h)(this,{loading:!0,isloggedIn:!1,username:""})},x=n(0),f=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return Object(x.jsx)(c.a.Fragment,{children:Object(x.jsx)("button",{className:"btn btn-primary logout-btn",type:"submit",disabled:this.props.disabled,onClick:function(){return e.props.onClick()},children:this.props.text})})}}]),n}(c.a.Component),m=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(b.a)(this,n),(r=t.call(this,e)).setusername=function(e){r.setState({username:e.target.value})},r.setpassword=function(e){r.setState({password:e.target.value})},r.dologin=Object(l.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.state.username){e.next=2;break}return e.abrupt("return");case 2:if(r.state.password){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,fetch("/login",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:r.state.username,password:r.state.password})});case 7:return t=e.sent,e.next=10,t.json();case 10:(n=e.sent)&&n.success?Object(p.o)((function(){O.username=r.state.username,O.isLoggedIn=!0,r.props.setStatus(!0)})):n&&!1===n.success&&(Object(p.o)((function(){O.isLoggedIn=!1,O.username="",O.isLoggedIn=!0})),alert(n.msg)),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(4),Object(p.o)((function(){O.isLoggedIn=!1,O.username="",O.isLoggedIn=!0})),console.log(e.t0),alert("something went wrong");case 19:case"end":return e.stop()}}),e,null,[[4,14]])}))),r.resetform=function(){r.setState({password:""})},r.state={username:"",password:""},r}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return Object(x.jsx)(c.a.Fragment,{children:Object(x.jsxs)("form",{className:"login-form",onSubmit:function(e){return e.preventDefault()},children:[Object(x.jsx)("h2",{children:"Log In"}),Object(x.jsx)("div",{className:"form-group",children:Object(x.jsx)("input",{type:"text",className:"form-control",placeholder:"Enter Username",onChange:this.setusername,defaultValue:this.state.username})}),Object(x.jsx)("div",{className:"form-group",children:Object(x.jsx)("input",{type:"password",className:"form-control",placeholder:"Password",onChange:this.setpassword,defaultValue:this.state.password})}),Object(x.jsx)(f,{text:"Log In",disabled:!1,onClick:function(){return e.dologin()}})]})})}}]),n}(c.a.Component),g=Object(h.a)(m),w=function(e){return Object(x.jsx)(c.a.Fragment,{children:Object(x.jsx)("nav",{children:Object(x.jsx)("ul",{className:"nav",children:Object(x.jsxs)("li",{className:"nav-item ml-5",children:["User: ",e.user]})})})})},v=function(e){return Object(x.jsx)(c.a.Fragment,{children:Object(x.jsx)("div",{className:"sidebar",children:Object(x.jsxs)("ul",{className:"",children:[Object(x.jsx)("li",{children:Object(x.jsx)("button",{className:"btn",style:"Dashboard"===e.choice?k:y,onClick:function(){return e.setContent("Dashboard")},children:"Dashboard"})}),Object(x.jsx)("li",{children:Object(x.jsx)("button",{className:"btn",style:"Books"===e.choice?k:y,onClick:function(){return e.setContent("Books")},children:"Books"})}),Object(x.jsx)("li",{children:Object(x.jsx)("button",{className:"btn",style:"Borrowers"===e.choice?k:y,onClick:function(){return e.setContent("Borrowers")},children:"Borrowers"})})]})})})},k={backgroundColor:"#26a69a"},y={backgroundColor:"#3d4d4b"},N=n(3),_=n.p+"static/media/returnbook1.788b307a.png",C=n.p+"static/media/borrow.807eb5a0.png",S=new function e(){var t=this;Object(b.a)(this,e),function(){var e=Object(l.a)(i.a.mark((function e(){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/getborrow_records",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"}});case 3:return n=e.sent,e.next=6,n.json();case 6:(r=e.sent)&&r.success?Object(p.h)(t,{Allborrowing:r.msg}):(Object(p.h)(t,{Allborrowing:[]}),console.log("error to load borrowers")),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),Object(p.h)(t,{Allborrowing:[]}),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}()()},A=new function e(){var t=this;Object(b.a)(this,e),function(){var e=Object(l.a)(i.a.mark((function e(){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/getbooks",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"}});case 3:return n=e.sent,e.next=6,n.json();case 6:(r=e.sent)&&r.success?Object(p.h)(t,{Allbooks:r.msg}):(console.log("error to load books"),Object(p.h)(t,{Allbooks:[]})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),Object(p.h)(t,{Allbooks:[]}),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}()()},B={color:"white",fontSize:10},I={backgroundColor:"#d77486",width:113,fontSize:10},D=function(e){var t=e.record,n=(e.Setrecord,Object(r.useState)("pending"===t.status?"danger":"success")),c=Object(N.a)(n,2),o=c[0],s=c[1],a="badge badge-"+o,b=function(){var e=Object(l.a)(i.a.mark((function e(){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/mark_as_returnRequest",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({borrowing_id:t.borrowing_id})});case 3:return n=e.sent,e.next=6,n.json();case 6:(r=e.sent)&&r.success?(console.log("success"),s("success"),Object(p.o)((function(){for(var e in S.Allborrowing)if(S.Allborrowing[e].borrowing_id===t.borrowing_id){S.Allborrowing[e].status="reterned";break}})),Object(p.o)((function(){for(var e in A.Allbooks)if(A.Allbooks[e].book_name===t.book_name){A.Allbooks[e].avaliable=parseInt(A.Allbooks[e].avaliable)+1;break}}))):console.log("something went wrong else block"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),console.log("something went wrong catch block");case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:Object(x.jsxs)("div",{className:"book-cell",children:[Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col font-weight-bold",children:"Name: "}),Object(x.jsx)("div",{className:"col",children:t.book_name})]}),Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col font-weight-bold",children:"Author: "}),Object(x.jsx)("div",{className:"col",children:t.author})]}),Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col font-weight-bold",children:"Status: "}),Object(x.jsx)("div",{className:"col",children:Object(x.jsx)("span",{className:a,style:B,children:t.status})})]})]})}),Object(x.jsx)("td",{children:t.borrower_name}),Object(x.jsx)("td",{children:t.borrow_date.substr(0,t.borrow_date.search("T"))}),Object(x.jsx)("td",{children:t.return_date.substr(0,t.return_date.search("T"))}),Object(x.jsx)("td",{children:Object(x.jsx)("button",{className:"btn",style:I,onClick:function(){return b()},disabled:"danger"!==o,children:"mark as return"})})]})},L=function(){var e=Object(r.useState)(S.Allborrowing),t=Object(N.a)(e,2),n=t[0],c=t[1];return Object(x.jsxs)("div",{className:"return-from",children:[Object(x.jsx)("form",{children:Object(x.jsx)("input",{type:"text",placeholder:"Enter bookname or borrower name",onChange:function(e){return function(e){for(var t="!@#$^&%*()+=-[]/{}|:<>?,.\\",n=0;n<t.length;n++)e=e.replace(new RegExp("\\"+t[n],"gi"),"");c(S.Allborrowing.filter((function(t){return t.borrower_name.match(new RegExp("[a-zA-Z]*"+e,"gi"))||t.book_name.match(new RegExp("[a-zA-Z]*"+e,"gi"))})))}(e.target.value)}})}),Object(x.jsxs)("table",{children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{className:"table-info",children:[Object(x.jsx)("th",{children:"Book"}),Object(x.jsx)("th",{children:"Borrower"}),Object(x.jsx)("th",{children:"Date Borrowed"}),Object(x.jsx)("th",{children:"Returning Date"}),Object(x.jsx)("th",{children:"Action"})]})}),Object(x.jsx)("tbody",{children:n.sort((function(e,t){return"returned"===t.status?-1:1})).map((function(e){return Object(x.jsx)(D,{record:e,Setresult:c},e.borrowing_id)}))})]})]})},T=new function e(){var t=this;Object(b.a)(this,e),function(){var e=Object(l.a)(i.a.mark((function e(){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/getborrowers",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"}});case 3:return n=e.sent,e.next=6,n.json();case 6:(r=e.sent)&&r.success?Object(p.h)(t,{Allborrows:r.msg}):(Object(p.h)(t,{Allborrows:[]}),console.log("error to load borrowers")),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),Object(p.h)(t,{Allborrows:[]}),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}()()},R=function(e){var t=e.list,n=e.SetBook;return t.avaliable<1?null:Object(x.jsxs)("div",{className:"search-resul",onClick:function(){return n(t.book_id,t.book_name)},children:[Object(x.jsxs)("span",{className:"mx-2",children:["#",t.book_id]}),Object(x.jsx)("span",{className:"mx-2",children:t.book_name}),Object(x.jsx)("span",{className:"mx-2",children:t.author})]})},F=function(e){var t=e.list,n=e.SetBorrower;return Object(x.jsxs)("div",{className:"search-resul",onClick:function(){return n(t.borrower_id,t.borrower_name)},children:[Object(x.jsxs)("span",{className:"mx-2",children:["#",t.borrower_id]}),Object(x.jsx)("span",{className:"mx-2",children:t.borrower_name}),Object(x.jsx)("span",{className:"mx-2",children:t.address})]})},E=function(e){var t=e.type,n=e.msg,r="alert alert-"+t;return Object(x.jsx)("div",{className:r,role:"alert",children:n})},q=function(){var e=Object(r.useState)(""),t=Object(N.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(""),s=Object(N.a)(o,2),a=s[0],b=s[1],u=Object(r.useState)(""),j=Object(N.a)(u,2),d=j[0],h=j[1],O=Object(r.useState)(""),f=Object(N.a)(O,2),m=f[0],g=f[1],w=Object(r.useState)([]),v=Object(N.a)(w,2),k=v[0],y=v[1],_=Object(r.useState)([]),C=Object(N.a)(_,2),B=C[0],I=C[1],D=Object(r.useState)(""),L=Object(N.a)(D,2),q=L[0],J=L[1],z=Object(r.useState)(!1),P=Object(N.a)(z,2),Z=P[0],$=P[1],M=function(e,t){c(t+" ( ID: #"+e+" )"),h(e),I([])},V=function(e,t){b(t+" ( ID: #"+e+" )"),g(e),y([])},Q=function(){var e=Object(l.a)(i.a.mark((function e(){var t,n,r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(m.length<1||d.length<1||0===q)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,t=new Date,n=t.getFullYear()+"/"+t.getMonth()+"/"+t.getDate(),e.next=7,fetch("/borrowrRequest",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({borrower_id:m,book_id:d,status:"pending",borrow_date:n,borrow_for:q})});case 7:return r=e.sent,e.next=10,r.json();case 10:(o=e.sent)&&o.success?($(!0),c(""),b(""),console.log("success"),Object(p.o)((function(){for(var e in console.log("inside runInAction request borrow book"),S.Allborrowing=o.msg,A.Allbooks)if(A.Allbooks[e].book_id===d){A.Allbooks[e].avaliable=parseInt(A.Allbooks[e].avaliable)-1;break}}))):console.log("something went wrong"),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),console.log(e.t0),console.log("something went wrong");case 18:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:"borrow-from",children:[Z?Object(x.jsx)(E,{type:"success",msg:"Request successful"}):null,Object(x.jsxs)("form",{className:"form-select form-select-lg mb-3","aria-label":".form-select-lg example",onSubmit:function(e){return e.preventDefault()},children:[Object(x.jsx)("input",{type:"text",placeholder:"Borrower Name",onChange:function(e){return function(e){if(b(e),$(!1),""!==e&&0!==e.length){for(var t="!@#$^&%*()+=-[]/{}|:<>?,.\\",n=0;n<t.length;n++)e=e.replace(new RegExp("\\"+t[n],"gi"),"");y(T.Allborrows.filter((function(t){return t.borrower_name.match(new RegExp("[a-zA-Z]*"+e,"gi"))})))}else y([])}(e.target.value)},value:a}),Object(x.jsx)("div",{className:"search-result-container",children:k.map((function(e){return Object(x.jsx)(F,{list:e,SetBorrower:V},e.borrower_id)}))}),Object(x.jsx)("input",{type:"text",placeholder:"Book name",onChange:function(e){return function(e){if($(!1),c(e),""!==e&&0!==e.length){for(var t="!@#$^&%*()+=-[]/{}|:<>?,.\\",n=0;n<t.length;n++)e=e.replace(new RegExp("\\"+t[n],"gi"),"");-1===e.search("\\)")&&-1===e.search("\\(")&&I(A.Allbooks.filter((function(t){return t.book_name.match(new RegExp("[a-zA-Z]*"+e,"gi"))&&t.avaliable>0})))}else I([])}(e.target.value)},value:n}),Object(x.jsx)("div",{className:"search-result-container",children:B.map((function(e){return Object(x.jsx)(R,{list:e,SetBook:M},e.book_id)}))}),Object(x.jsxs)("select",{className:"form-select","aria-label":"Default select example",onChange:function(e){return J(e.target.value)},children:[Object(x.jsx)("option",{defaultValue:"0",children:"For how many days"}),Object(x.jsx)("option",{value:"7",children:"Sevel days"}),Object(x.jsx)("option",{value:"15",children:"Fifteen days"}),Object(x.jsx)("option",{value:"30",children:"Thirty days"})]}),Object(x.jsx)("button",{type:"submit",className:"btn btn-primary mt-5",onClick:function(){return Q()},children:"Submit"})]})]})},J=function(){var e=Object(r.useState)("menu"),t=Object(N.a)(e,2),n=t[0],o=t[1],s=function(e){o(e)};return"menu"===n?Object(x.jsx)("div",{className:"dashboard",children:Object(x.jsxs)("div",{className:"row",children:[Object(x.jsxs)("div",{className:"col",children:[Object(x.jsx)("h5",{children:"Return Book"}),Object(x.jsx)("img",{src:_,className:"rounded mx-auto d-block",alt:"Return Book",onClick:function(){return s("rb")}})]}),Object(x.jsxs)("div",{className:"col",children:[Object(x.jsx)("h5",{children:"Borrow Book"}),Object(x.jsx)("img",{src:C,className:"rounded mx-auto d-block",alt:"Borrow Book",onClick:function(){return s("bb")}})]})]})}):"rb"===n?Object(x.jsxs)(c.a.Fragment,{children:[Object(x.jsx)("button",{className:"btn btn-primary m-4",onClick:function(){return s("menu")},children:"Back"}),Object(x.jsx)(L,{})]}):Object(x.jsxs)(c.a.Fragment,{children:[Object(x.jsx)("button",{className:"btn btn-primary m-4",onClick:function(){return s("menu")},children:"Back"}),Object(x.jsx)(q,{})]})},z=n(7),P=function(e){var t=e.book,n=e.editID,c=e.Changeid,o=e.SetAllbooks,s=Object(r.useState)(t.book_name),a=Object(N.a)(s,2),b=a[0],u=a[1],j=Object(r.useState)(t.author),d=Object(N.a)(j,2),h=d[0],O=d[1],f=Object(r.useState)(t.publisher),m=Object(N.a)(f,2),g=m[0],w=m[1],v=Object(r.useState)(t.yop),k=Object(N.a)(v,2),y=k[0],_=k[1],C=t.avaliable,S=t.quantity,B=function(){var e=Object(l.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(b.length<3||h.length<3||g.length<4||4!==y.length)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,fetch("/editbook",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({book_id:t,book_name:b,author:h,publisher:g,yop:y})});case 5:return n=e.sent,e.next=8,n.json();case 8:(r=e.sent)&&r.success?(console.log("success"),c(""),o((function(e){return[].concat(Object(z.a)(e.filter((function(e){return e.book_id!==t}))),[{book_id:t,book_name:b,author:h,quantity:S,avaliable:C,publisher:g,yop:y}])})),Object(p.o)((function(){A.Allbooks=[].concat(Object(z.a)(A.Allbooks.filter((function(e){return e.book_id!==t}))),[{book_id:t,book_name:b,author:h,quantity:S,avaliable:C,publisher:g,yop:y}])}))):console.log("something went wrong"),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0),console.log("something went wrong");case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}();return n!==t.book_id?Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:t.book_name}),Object(x.jsx)("td",{children:t.author}),Object(x.jsx)("td",{children:t.quantity}),Object(x.jsx)("td",{children:t.avaliable}),Object(x.jsx)("td",{children:t.publisher}),Object(x.jsx)("td",{children:t.yop}),Object(x.jsx)("td",{children:Object(x.jsx)("i",{className:"fa fa-pencil-square-o","aria-hidden":"true",onClick:function(){return c(t.book_id)}})})]}):Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:Object(x.jsx)("input",{type:"text",value:b,onChange:function(e){u(e.target.value)}})}),Object(x.jsx)("td",{children:Object(x.jsx)("input",{type:"text",value:h,onChange:function(e){O(e.target.value)}})}),Object(x.jsx)("td",{children:t.quantity}),Object(x.jsx)("td",{children:t.avaliable}),Object(x.jsx)("td",{children:Object(x.jsx)("input",{type:"text",value:g,onChange:function(e){w(e.target.value)}})}),Object(x.jsx)("td",{children:Object(x.jsx)("input",{type:"text",value:y,onChange:function(e){_(e.target.value)}})}),Object(x.jsx)("td",{children:Object(x.jsx)("i",{className:"fa fa-floppy-o","aria-hidden":"true",onClick:function(){return B(t.book_id)}})})]})},Z=function(){var e=Object(r.useState)(A.Allbooks),t=Object(N.a)(e,2),n=t[0],o=t[1],s=Object(r.useState)(""),a=Object(N.a)(s,2),b=a[0],u=a[1],j=Object(r.useState)("show"),d=Object(N.a)(j,2),h=d[0],O=d[1],f=Object(r.useState)(""),m=Object(N.a)(f,2),g=m[0],w=m[1],v=Object(r.useState)(""),k=Object(N.a)(v,2),y=k[0],_=k[1],C=Object(r.useState)(""),S=Object(N.a)(C,2),B=S[0],I=S[1],D=Object(r.useState)(""),L=Object(N.a)(D,2),T=L[0],R=L[1],F=Object(r.useState)(""),q=Object(N.a)(F,2),J=q[0],Z=q[1],$=Object(r.useState)(!1),M=Object(N.a)($,2),V=M[0],Q=M[1],U=function(){var e=Object(l.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(g.length<3||y.length<3||4!==B.length)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,fetch("/addbook",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({book_name:g,author:y,yop:B,publisher:T,quantity:J})});case 5:return t=e.sent,e.next=8,t.json();case 8:(n=e.sent)&&n.success?(console.log("success"),Q(!0),w(""),_(""),I(""),R(""),Z(""),o((function(e){return[].concat(Object(z.a)(e),[{book_id:(e.length+1).toString(),book_name:g,author:y,quantity:J,avaliable:J,publisher:T,yop:B}])})),Object(p.o)((function(){A.Allbooks=[].concat(Object(z.a)(A.Allbooks),[{book_id:(A.Allbooks.length+1).toString(),book_name:g,author:y,quantity:J,avaliable:J,publisher:T,yop:B}])}))):alert("something went wrong"),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0),alert("something went wrong");case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}(),Y=function(e){u(e)};return"show"===h?Object(x.jsxs)("div",{className:"books",children:[Object(x.jsx)("div",{className:"row",children:Object(x.jsxs)("form",{action:"#",children:[Object(x.jsx)("button",{type:"button",className:"btn btn-outline-info mr-5",onClick:function(){return O("add book")},children:"Add Book"}),Object(x.jsx)("p",{children:Object(x.jsxs)("label",{children:[Object(x.jsx)("input",{type:"checkbox"}),Object(x.jsx)("span",{children:"All"})]})}),Object(x.jsx)("p",{children:Object(x.jsxs)("label",{children:[Object(x.jsx)("input",{type:"checkbox"}),Object(x.jsx)("span",{children:"sci"})]})}),Object(x.jsx)("p",{children:Object(x.jsxs)("label",{children:[Object(x.jsx)("input",{type:"checkbox"}),Object(x.jsx)("span",{children:"arts"})]})}),Object(x.jsx)("p",{children:Object(x.jsxs)("label",{children:[Object(x.jsx)("input",{type:"checkbox"}),Object(x.jsx)("span",{children:"com"})]})}),Object(x.jsx)("input",{type:"text",placeholder:"Search",onChange:function(e){return function(e){for(var t="!@#$^&%*()+=-[]/{}|:<>?,.\\",n=0;n<t.length;n++)e=e.replace(new RegExp("\\"+t[n],"gi"),"");o(A.Allbooks.filter((function(t){return t.book_name.match(new RegExp("[a-zA-Z]*"+e,"gi"))})))}(e.target.value)}})]})}),Object(x.jsx)("div",{className:"table-wrapper",children:Object(x.jsxs)("table",{children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{className:"table-info",children:[Object(x.jsx)("th",{children:"Book Name"}),Object(x.jsx)("th",{children:"Author"}),Object(x.jsx)("th",{children:"Total Quantity"}),Object(x.jsx)("th",{children:"Available Stock"}),Object(x.jsx)("th",{children:"Publisher"}),Object(x.jsx)("th",{children:"Published In"}),Object(x.jsx)("th",{children:"Action"})]})}),Object(x.jsx)("tbody",{children:n.slice(0,20).sort((function(e,t){return e.book_name.localeCompare(t.book_name)})).map((function(e){return Object(x.jsx)(P,{book:e,editID:b,Changeid:Y,SetAllbooks:o},e.book_id)}))})]})})]}):Object(x.jsxs)(c.a.Fragment,{children:[Object(x.jsx)("button",{className:"btn btn-primary m-4",onClick:function(){return O("show")},children:"Back"}),Object(x.jsxs)("div",{className:"borrow-from",children:[V?Object(x.jsx)(E,{type:"success",msg:"Book Addred"}):null,Object(x.jsxs)("form",{className:"form-select form-select-lg mb-3","aria-label":".form-select-lg example",onSubmit:function(e){return e.preventDefault()},children:[Object(x.jsx)("input",{type:"text",placeholder:"Book Name",onChange:function(e){return w(e.target.value)},value:g}),Object(x.jsx)("input",{type:"text",placeholder:"Author",onChange:function(e){return _(e.target.value)},value:y}),Object(x.jsx)("input",{type:"text",placeholder:"year of publish",onChange:function(e){return I(e.target.value)},value:B}),Object(x.jsx)("input",{type:"text",placeholder:"publisher",onChange:function(e){return R(e.target.value)},value:T}),Object(x.jsx)("input",{type:"text",placeholder:"Quantity",onChange:function(e){return Z(e.target.value)},value:J}),Object(x.jsx)("button",{type:"submit",className:"btn btn-primary mt-5",onClick:function(){return U()},children:"Submit"})]})]})]})},$=function(e){var t=e.borrower,n=e.editID,c=e.Changeid,o=e.SetAllborrowers,s=Object(r.useState)(t.borrower_name),a=Object(N.a)(s,2),b=a[0],u=a[1],j=Object(r.useState)(t.address),d=Object(N.a)(j,2),h=d[0],O=d[1],f=Object(r.useState)(t.phn),m=Object(N.a)(f,2),g=m[0],w=m[1],v=(t.borrower_id,function(){var e=Object(l.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(b.length<3||h.length<3||g.length<4)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,fetch("/editborrower",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({borrower_id:t,borrower_name:b,address:h,phn:g})});case 5:return n=e.sent,e.next=8,n.json();case 8:(r=e.sent)&&r.success?(console.log("success"),c(""),o((function(e){return[].concat(Object(z.a)(e.filter((function(e){return e.borrower_id!==t}))),[{borrower_id:t,borrower_name:b,address:h,phn:g}])})),Object(p.o)((function(){T.Allborrows=[].concat(Object(z.a)(T.Allborrows.filter((function(e){return e.borrower_id!==t}))),[{borrower_id:t,borrower_name:b,address:h,phn:g}])}))):console.log("something went wrong"),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0),console.log("something went wrong");case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}());return n===t.borrower_id?Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:Object(x.jsx)("input",{type:"text",value:b,onChange:function(e){u(e.target.value)}})}),Object(x.jsxs)("td",{children:["#",t.borrower_id]}),Object(x.jsx)("td",{children:Object(x.jsx)("input",{type:"text",value:h,onChange:function(e){O(e.target.value)}})}),Object(x.jsx)("td",{children:Object(x.jsx)("input",{type:"text",value:g,onChange:function(e){w(e.target.value)}})}),Object(x.jsx)("td",{children:Object(x.jsx)("i",{className:"fa fa-floppy-o","aria-hidden":"true",onClick:function(){return v(t.borrower_id)}})})]}):Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:t.borrower_name}),Object(x.jsxs)("td",{children:["#",t.borrower_id]}),Object(x.jsx)("td",{children:t.address}),Object(x.jsx)("td",{children:t.phn}),Object(x.jsx)("td",{children:Object(x.jsx)("i",{className:"fa fa-pencil-square-o","aria-hidden":"true",onClick:function(){return c(t.borrower_id)}})})]})},M=function(){var e=Object(r.useState)(T.Allborrows),t=Object(N.a)(e,2),n=t[0],o=t[1],s=Object(r.useState)(""),a=Object(N.a)(s,2),b=a[0],u=a[1],j=Object(r.useState)("show"),d=Object(N.a)(j,2),h=d[0],O=d[1],f=Object(r.useState)(""),m=Object(N.a)(f,2),g=m[0],w=m[1],v=Object(r.useState)(""),k=Object(N.a)(v,2),y=k[0],_=k[1],C=Object(r.useState)(""),S=Object(N.a)(C,2),A=S[0],B=S[1],I=Object(r.useState)(!1),D=Object(N.a)(I,2),L=D[0],R=D[1],F=function(e){u(e)},q=function(){var e=Object(l.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(g.length<3||y.length<3||A.length<5)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,fetch("/addborrower",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({borrower_name:g,address:y,phn:A})});case 5:return t=e.sent,e.next=8,t.json();case 8:(n=e.sent)&&n.success?(R(!0),console.log("success"),w(""),_(""),B(""),o((function(e){return[].concat(Object(z.a)(e),[{borrower_id:(e.length+1).toString(),borrower_name:g,address:y,phn:A}])})),Object(p.o)((function(){T.Allborrows=[].concat(Object(z.a)(T.Allborrows),[{borrower_id:(T.Allborrows.length+1).toString(),borrower_name:g,address:y,phn:A}])}))):console.log("something went wrong"),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0),console.log("something went wrong");case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}();return"show"===h?Object(x.jsxs)("div",{className:"borrowers",children:[Object(x.jsx)("button",{type:"button",className:"btn btn-outline-info mr-5",onClick:function(){return O("new borrower")},children:"New Borrower"}),Object(x.jsx)("div",{className:"row",children:Object(x.jsx)("input",{type:"text",placeholder:"Search (Enter borrower id or borrower name)",onChange:function(e){return function(e){for(var t="!@#$^&%*()+=-[]/{}|:<>?,.\\",n=0;n<t.length;n++)e=e.replace(new RegExp("\\"+t[n],"gi"),"");o(T.Allborrows.filter((function(t){return t.borrower_name.match(new RegExp("[a-zA-Z]*"+e,"gi"))})))}(e.target.value)}})}),Object(x.jsx)("div",{className:"table-wrapper",children:Object(x.jsxs)("table",{children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{className:"table-info",children:[Object(x.jsx)("th",{children:"Name"}),Object(x.jsx)("th",{children:"#ID"}),Object(x.jsx)("th",{children:"Address"}),Object(x.jsx)("th",{children:"Phn No"}),Object(x.jsx)("th",{children:"Action"})]})}),Object(x.jsx)("tbody",{children:n.slice(0,20).sort((function(e,t){return e.borrower_name.localeCompare(t.borrower_name)})).map((function(e){return Object(x.jsx)($,{borrower:e,editID:b,Changeid:F,SetAllborrowers:o},e.borrower_id)}))})]})})]}):Object(x.jsxs)(c.a.Fragment,{children:[Object(x.jsx)("button",{className:"btn btn-primary m-4",onClick:function(){return O("show")},children:"Back"}),Object(x.jsxs)("div",{className:"borrow-from",children:[L?Object(x.jsx)(E,{type:"success",msg:"New Borrower Created"}):null,Object(x.jsxs)("form",{className:"form-select form-select-lg mb-3","aria-label":".form-select-lg example",onSubmit:function(e){return e.preventDefault()},children:[Object(x.jsx)("input",{type:"text",placeholder:"Borrower borrower_name",onChange:function(e){return w(e.target.value)},value:g}),Object(x.jsx)("input",{type:"text",placeholder:"Address",onChange:function(e){return _(e.target.value)},value:y}),Object(x.jsx)("input",{type:"text",placeholder:"Phone No",onChange:function(e){return B(e.target.value)},value:A}),Object(x.jsx)("button",{type:"submit",className:"btn btn-primary mt-5",onClick:function(){return q()},children:"Submit"})]})]})]})},V=function(e){return Object(x.jsxs)("div",{className:"content-wrapper",children:[Object(x.jsx)(f,{text:"Log Out",disabled:!1,onClick:function(){return e.logout()}}),"Dashboard"===e.option?Object(x.jsx)(J,{}):"","Books"===e.option?Object(x.jsx)(Z,{}):"","Borrowers"===e.option?Object(x.jsx)(M,{}):""]})},Q=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(b.a)(this,n),(e=t.call(this)).doLogout=Object(l.a)(i.a.mark((function t(){var n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/logout",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"}});case 3:return n=t.sent,t.next=6,n.json();case 6:(r=t.sent)&&r.success&&(O.isLoggedIn=!1,O.username="",e.setState({isLoggedIn:O.isLoggedIn})),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])}))),e.setContent=function(t){e.setState({option:t})},e.setStatus=function(t){e.setState({isloggedIn:!0})},e.state={option:"Dashboard",isLoggedIn:O.isLoggedIn},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/isLoggedIn",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"}});case 3:return t=e.sent,e.next=6,t.json();case 6:(n=e.sent)&&n.success?Object(p.o)((function(){O.loading=!1,O.isLoggedIn=!0,O.userName="root"})):Object(p.o)((function(){O.loading=!1,O.isloaded=!1})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),Object(p.o)((function(){O.loading=!1,O.isloggedIn=!1}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return O.loading?Object(x.jsx)("div",{className:"App",children:Object(x.jsx)("div",{className:"container",children:"loading , please wait..."})}):O.isLoggedIn?Object(x.jsxs)(c.a.Fragment,{children:[Object(x.jsx)(w,{user:"root"}),Object(x.jsx)("div",{className:"App",children:Object(x.jsxs)("div",{className:"container",children:[Object(x.jsx)(v,{setContent:this.setContent,choice:this.state.option}),Object(x.jsx)(V,{option:this.state.option,logout:this.doLogout})]})})]}):Object(x.jsx)("div",{className:"App",children:Object(x.jsx)("div",{className:"container",children:Object(x.jsx)(g,{setStatus:this.setStatus})})})}}]),n}(c.a.Component),U=Object(h.a)(Q),Y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,29)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),o(e),s(e)}))};s.a.render(Object(x.jsx)(c.a.StrictMode,{children:Object(x.jsx)(U,{})}),document.getElementById("root")),Y()}},[[28,1,2]]]);
//# sourceMappingURL=main.3ab0d230.chunk.js.map